<div class="Box-sc-g0xbh4-0 bJMeLZ js-snippet-clipboard-copy-unpositioned" data-hpc="true"><article class="markdown-body entry-content container-lg" itemprop="text"><p dir="auto"><a href="/deep-floyd/IF/blob/develop/LICENSE"><img src="https://camo.githubusercontent.com/37fb4ce4db0277529fdc9d068a474a0fc4a6f638342fb6e758929c95bfdfd0b3/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f436f64655f4c6963656e73652d4d6f6469666965645f4d49542d626c75652e737667" alt="执照" data-canonical-src="https://img.shields.io/badge/Code_License-Modified_MIT-blue.svg" style="max-width: 100%;"></a>
<a href="/deep-floyd/IF/blob/develop/LICENSE-MODEL"><img src="https://camo.githubusercontent.com/f3b54a4d653e9317d3227f5bb9dbb49f92ec1d9c49dc0f7a1ba2f7bcafdaaefe/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f576569676874735f4c6963656e73652d44656570466c6f79645f49462d6f72616e67652e737667" alt="执照" data-canonical-src="https://img.shields.io/badge/Weights_License-DeepFloyd_IF-orange.svg" style="max-width: 100%;"></a>
<a href="https://pepy.tech/project/deepfloyd_if" rel="nofollow"><img src="https://camo.githubusercontent.com/04975eb6d9e391bc95ac56c09c715a64f01f0146c014ceee1d5887c806b91506/68747470733a2f2f706570792e746563682f62616467652f64656570666c6f79645f6966" alt="下载" data-canonical-src="https://pepy.tech/badge/deepfloyd_if" style="max-width: 100%;"></a>
<a href="https://discord.gg/umz62Mgr" rel="nofollow"><img src="https://camo.githubusercontent.com/80deb183f87d91c5b628533ac6a0c6ac0752c553a69df73faa336f1f9b7c9de8/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f446973636f72642d2532333732383944412e7376673f6c6f676f3d646973636f7264266c6f676f436f6c6f723d7768697465" alt="不和谐" data-canonical-src="https://img.shields.io/badge/Discord-%237289DA.svg?logo=discord&amp;logoColor=white" style="max-width: 100%;"></a>
<a href="https://twitter.com/deepfloydai" rel="nofollow"><img src="https://camo.githubusercontent.com/d9f20db24918d5775da690f0565853740044fe8de0eadd85a13d8b78e791d3c3/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f547769747465722d2532333144413146322e7376673f6c6f676f3d74776974746572266c6f676f436f6c6f723d7768697465" alt="推特" data-canonical-src="https://img.shields.io/badge/Twitter-%231DA1F2.svg?logo=twitter&amp;logoColor=white" style="max-width: 100%;"></a>
<a href="http://linktr.ee/deepfloyd" rel="nofollow"><img src="https://camo.githubusercontent.com/cbccddec1bb4bb60f5d00aff5a2189f917dcd23eaa915e68f8bc37f20f9f7d47/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f4c696e6b747265652d2532333339453039422e7376673f6c6f676f3d6c696e6b74726565266c6f676f436f6c6f723d7768697465" alt="链接树" data-canonical-src="https://img.shields.io/badge/Linktree-%2339E09B.svg?logo=linktree&amp;logoColor=white" style="max-width: 100%;"></a></p>
<div class="markdown-heading" dir="auto"><h1 tabindex="-1" class="heading-element" dir="auto"><font style="vertical-align: inherit;"><a href="https://stability.ai/" rel="nofollow"><font style="vertical-align: inherit;">StabilityAI</font></a><font style="vertical-align: inherit;">的</font></font><a href="https://deepfloyd.ai" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DeepFloyd Lab</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的 IF</font></font><a href="https://stability.ai/" rel="nofollow"><font style="vertical-align: inherit;"></font></a></h1><a id="user-content-if-by-deepfloyd-lab-at-stabilityai" class="anchor" aria-label="永久链接：StabilityAI 的 DeepFloyd Lab 的 IF" href="#if-by-deepfloyd-lab-at-stabilityai"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p align="center" dir="auto">
  <a target="_blank" rel="noopener noreferrer" href="/deep-floyd/IF/blob/develop/pics/nabla.jpg"><img src="/deep-floyd/IF/raw/develop/pics/nabla.jpg" width="100%" style="max-width: 100%;"></a>
</p>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们介绍了 DeepFloyd IF，这是一种新颖的最先进的开源文本转图像模型，具有高度的照片级真实感和语言理解能力。DeepFloyd IF 是一个由冻结文本编码器和三个级联像素扩散模块组成的模块：一个基于文本提示生成 64x64 像素图像的基本模型和两个超分辨率模型，每个模型都旨在生成分辨率不断提高的图像：256x256 像素和 1024x1024 像素。该模型的所有阶段都使用基于 T5 变换器的冻结文本编码器来提取文本嵌入，然后将其输入到通过交叉注意力和注意力池增强的 UNet 架构中。结果是一个高效的模型，其表现优于目前最先进的模型，在 COCO 数据集上实现了 6.66 的零样本 FID 分数。我们的工作强调了更大的 UNet 架构在级联扩散模型第一阶段的潜力，并描绘了文本转图像合成的光明未来。</font></font></p>
<p align="center" dir="auto">
  <a target="_blank" rel="noopener noreferrer" href="/deep-floyd/IF/blob/develop/pics/deepfloyd_if_scheme.jpg"><img src="/deep-floyd/IF/raw/develop/pics/deepfloyd_if_scheme.jpg" width="100%" style="max-width: 100%;"></a>
</p>
<p dir="auto"><em><font style="vertical-align: inherit;"></font></em> <font style="vertical-align: inherit;"><a href="https://arxiv.org/pdf/2205.11487.pdf" rel="nofollow"><em><font style="vertical-align: inherit;">受到具有深度语言理解能力的逼真文本到图像扩散模型的</font></em></a><em><font style="vertical-align: inherit;">启发</font></em></font><a href="https://arxiv.org/pdf/2205.11487.pdf" rel="nofollow"><em><font style="vertical-align: inherit;"></font></em></a></p>
<div class="markdown-heading" dir="auto"><h2 tabindex="-1" class="heading-element" dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用所有 IF 模型的最低要求：</font></font></h2><a id="user-content-minimum-requirements-to-use-all-if-models" class="anchor" aria-label="永久链接：使用所有 IF 模型的最低要求：" href="#minimum-requirements-to-use-all-if-models"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<ul dir="auto">
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IF-I-XL（4.3B 文本到 64x64 基本模块）和 IF-II-L（1.2B 到 256x256 升频模块）配备 16GB vRAM</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IF-I-XL（4.3B 文本至 64x64 基本模块）和 IF-II-L（1.2B 至 256x256 升频器模块）和 Stable x4（至 1024x1024 升频器）均配备 24GB vRAM</font></font></li>
<li><code>xformers</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并设置环境变量</font></font><code>FORCE_MEM_EFFICIENT_ATTN=1</code></li>
</ul>
<div class="markdown-heading" dir="auto"><h2 tabindex="-1" class="heading-element" dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">快速开始</font></font></h2><a id="user-content-quick-start" class="anchor" aria-label="永久链接：快速入门" href="#quick-start"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto"><a href="https://colab.research.google.com/github/huggingface/notebooks/blob/main/diffusers/deepfloyd_if_free_tier_google_colab.ipynb" rel="nofollow"><img src="https://camo.githubusercontent.com/f5e0d0538a9c2972b5d413e0ace04cecd8efd828d133133933dfffec282a4e1b/68747470733a2f2f636f6c61622e72657365617263682e676f6f676c652e636f6d2f6173736574732f636f6c61622d62616467652e737667" alt="在 Colab 中打开" data-canonical-src="https://colab.research.google.com/assets/colab-badge.svg" style="max-width: 100%;"></a>
<a href="https://huggingface.co/spaces/DeepFloyd/IF" rel="nofollow"><img src="https://camo.githubusercontent.com/5762a687b24495afb299c2c0bc68674a2a7dfca9bda6ee444b9da7617d4223a6/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f25463025394625413425393725323048756767696e67253230466163652d5370616365732d626c7565" alt="拥抱面部空间" data-canonical-src="https://img.shields.io/badge/%F0%9F%A4%97%20Hugging%20Face-Spaces-blue" style="max-width: 100%;"></a></p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" dir="auto"><pre>pip install deepfloyd_if==1.0.2rc0
pip install xformers==0.0.16
pip install git+https://github.com/openai/CLIP.git --no-deps</pre><div class="zeroclipboard-container">
    <clipboard-copy aria-label="Copy" class="ClipboardButton btn btn-invisible js-clipboard-copy m-2 p-0 tooltipped-no-delay d-flex flex-justify-center flex-items-center" data-copy-feedback="Copied!" data-tooltip-direction="w" value="pip install deepfloyd_if==1.0.2rc0
pip install xformers==0.0.16
pip install git+https://github.com/openai/CLIP.git --no-deps" tabindex="0" role="button">
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon">
    <path d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z"></path><path d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z"></path>
</svg>
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none">
    <path d="M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z"></path>
</svg>
    </clipboard-copy>
  </div></div>
<div class="markdown-heading" dir="auto"><h2 tabindex="-1" class="heading-element" dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">本地笔记本</font></font></h2><a id="user-content-local-notebooks" class="anchor" aria-label="永久链接：本地笔记本" href="#local-notebooks"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto"><a href="https://huggingface.co/DeepFloyd/IF-notebooks/blob/main/pipes-DeepFloyd-IF-v1.0.ipynb" rel="nofollow"><img src="https://camo.githubusercontent.com/0a1b14c432c37e653cfe0d332234ec6eaaf61e704c663db27a8d680652d4b847/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f6a7570797465725f6e6f7465626f6f6b2d2532334646374130312e7376673f6c6f676f3d6a757079746572266c6f676f436f6c6f723d7768697465" alt="Jupyter 笔记本" data-canonical-src="https://img.shields.io/badge/jupyter_notebook-%23FF7A01.svg?logo=jupyter&amp;logoColor=white" style="max-width: 100%;"></a>
<a href="https://www.kaggle.com/code/shonenkov/deepfloyd-if-4-3b-generator-of-pictures" rel="nofollow"><img src="https://camo.githubusercontent.com/1398db766d8ca60e6f296aac9ac429e344705c6c2c7e1ceb024230aac69fd6be/68747470733a2f2f6b6167676c652e636f6d2f7374617469632f696d616765732f6f70656e2d696e2d6b6167676c652e737667" alt="卡格勒" data-canonical-src="https://kaggle.com/static/images/open-in-kaggle.svg" style="max-width: 100%;"></a></p>
<p dir="auto"><font style="vertical-align: inherit;"></font><a href="https://huggingface.co/DeepFloyd/IF-notebooks/blob/main/pipes-DeepFloyd-IF-v1.0.ipynb" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这里的</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jupyter Notebook 中提供了梦幻、风格转换、超分辨率或修复模式</font><font style="vertical-align: inherit;">。</font></font></p>
<div class="markdown-heading" dir="auto"><h2 tabindex="-1" class="heading-element" dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">与🤗扩散器集成</font></font></h2><a id="user-content-integration-with--diffusers" class="anchor" aria-label="永久链接：与🤗扩散器集成" href="#integration-with--diffusers"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto"><font style="vertical-align: inherit;"></font><a href="https://github.com/huggingface/diffusers/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IF 还与 🤗 Hugging Face Diffusers 库</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">集成</font><font style="vertical-align: inherit;">。</font></font></p>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">扩散器单独运行每个阶段，允许用户自定义图像生成过程并轻松检查中间结果。</font></font></p>
<div class="markdown-heading" dir="auto"><h3 tabindex="-1" class="heading-element" dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例子</font></font></h3><a id="user-content-example" class="anchor" aria-label="永久链接：示例" href="#example"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在使用 IF 之前，您需要接受其使用条件。具体操作如下：</font></font></p>
<ol dir="auto">
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">确保拥有</font></font><a href="https://huggingface.co/join" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hugging Face 账户</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并登录</font></font></li>
<li><font style="vertical-align: inherit;"><a href="https://huggingface.co/DeepFloyd/IF-I-XL-v1.0" rel="nofollow"><font style="vertical-align: inherit;">在DeepFloyd/IF-I-XL-v1.0</font></a><font style="vertical-align: inherit;">模型卡上接受许可证</font></font><a href="https://huggingface.co/DeepFloyd/IF-I-XL-v1.0" rel="nofollow"><font style="vertical-align: inherit;"></font></a></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">确保本地登录。安装</font></font><code>huggingface_hub</code></li>
</ol>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" dir="auto"><pre>pip install huggingface_hub --upgrade</pre><div class="zeroclipboard-container">
    <clipboard-copy aria-label="Copy" class="ClipboardButton btn btn-invisible js-clipboard-copy m-2 p-0 tooltipped-no-delay d-flex flex-justify-center flex-items-center" data-copy-feedback="Copied!" data-tooltip-direction="w" value="pip install huggingface_hub --upgrade" tabindex="0" role="button">
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon">
    <path d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z"></path><path d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z"></path>
</svg>
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none">
    <path d="M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z"></path>
</svg>
    </clipboard-copy>
  </div></div>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在 Python shell 中运行登录函数</font></font></p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto"><pre><span class="pl-k">from</span> <span class="pl-s1">huggingface_hub</span> <span class="pl-k">import</span> <span class="pl-s1">login</span>

<span class="pl-en">login</span>()</pre><div class="zeroclipboard-container">
    <clipboard-copy aria-label="Copy" class="ClipboardButton btn btn-invisible js-clipboard-copy m-2 p-0 tooltipped-no-delay d-flex flex-justify-center flex-items-center" data-copy-feedback="Copied!" data-tooltip-direction="w" value="from huggingface_hub import login

login()" tabindex="0" role="button">
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon">
    <path d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z"></path><path d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z"></path>
</svg>
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none">
    <path d="M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z"></path>
</svg>
    </clipboard-copy>
  </div></div>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并输入您的</font></font><a href="https://huggingface.co/docs/hub/security-tokens#what-are-user-access-tokens" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hugging Face Hub 访问令牌</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">接下来我们安装</font></font><code>diffusers</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">依赖项：</font></font></p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" dir="auto"><pre>pip install diffusers accelerate transformers safetensors</pre><div class="zeroclipboard-container">
    <clipboard-copy aria-label="Copy" class="ClipboardButton btn btn-invisible js-clipboard-copy m-2 p-0 tooltipped-no-delay d-flex flex-justify-center flex-items-center" data-copy-feedback="Copied!" data-tooltip-direction="w" value="pip install diffusers accelerate transformers safetensors" tabindex="0" role="button">
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon">
    <path d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z"></path><path d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z"></path>
</svg>
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none">
    <path d="M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z"></path>
</svg>
    </clipboard-copy>
  </div></div>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">现在我们可以在本地运行该模型了。</font></font></p>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认情况下，</font></font><code>diffusers</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">利用</font></font><a href="https://huggingface.co/docs/diffusers/optimization/fp16#model-offloading-for-fast-inference-and-memory-savings" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">模型 CPU 卸载</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">来运行整个 IF 管道，且仅需 14 GB 的 VRAM。</font></font></p>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果您正在使用</font></font><code>torch&gt;=2.0.0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，请确保</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">删除所有</font></font></strong> <code>enable_xformers_memory_efficient_attention()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
功能。</font></font></p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto"><pre><span class="pl-k">from</span> <span class="pl-s1">diffusers</span> <span class="pl-k">import</span> <span class="pl-v">DiffusionPipeline</span>
<span class="pl-k">from</span> <span class="pl-s1">diffusers</span>.<span class="pl-s1">utils</span> <span class="pl-k">import</span> <span class="pl-s1">pt_to_pil</span>
<span class="pl-k">import</span> <span class="pl-s1">torch</span>

<span class="pl-c"># stage 1</span>
<span class="pl-s1">stage_1</span> <span class="pl-c1">=</span> <span class="pl-v">DiffusionPipeline</span>.<span class="pl-en">from_pretrained</span>(<span class="pl-s">"DeepFloyd/IF-I-XL-v1.0"</span>, <span class="pl-s1">variant</span><span class="pl-c1">=</span><span class="pl-s">"fp16"</span>, <span class="pl-s1">torch_dtype</span><span class="pl-c1">=</span><span class="pl-s1">torch</span>.<span class="pl-s1">float16</span>)
<span class="pl-s1">stage_1</span>.<span class="pl-en">enable_xformers_memory_efficient_attention</span>()  <span class="pl-c"># remove line if torch.__version__ &gt;= 2.0.0</span>
<span class="pl-s1">stage_1</span>.<span class="pl-en">enable_model_cpu_offload</span>()

<span class="pl-c"># stage 2</span>
<span class="pl-s1">stage_2</span> <span class="pl-c1">=</span> <span class="pl-v">DiffusionPipeline</span>.<span class="pl-en">from_pretrained</span>(
    <span class="pl-s">"DeepFloyd/IF-II-L-v1.0"</span>, <span class="pl-s1">text_encoder</span><span class="pl-c1">=</span><span class="pl-c1">None</span>, <span class="pl-s1">variant</span><span class="pl-c1">=</span><span class="pl-s">"fp16"</span>, <span class="pl-s1">torch_dtype</span><span class="pl-c1">=</span><span class="pl-s1">torch</span>.<span class="pl-s1">float16</span>
)
<span class="pl-s1">stage_2</span>.<span class="pl-en">enable_xformers_memory_efficient_attention</span>()  <span class="pl-c"># remove line if torch.__version__ &gt;= 2.0.0</span>
<span class="pl-s1">stage_2</span>.<span class="pl-en">enable_model_cpu_offload</span>()

<span class="pl-c"># stage 3</span>
<span class="pl-s1">safety_modules</span> <span class="pl-c1">=</span> {<span class="pl-s">"feature_extractor"</span>: <span class="pl-s1">stage_1</span>.<span class="pl-s1">feature_extractor</span>, <span class="pl-s">"safety_checker"</span>: <span class="pl-s1">stage_1</span>.<span class="pl-s1">safety_checker</span>, <span class="pl-s">"watermarker"</span>: <span class="pl-s1">stage_1</span>.<span class="pl-s1">watermarker</span>}
<span class="pl-s1">stage_3</span> <span class="pl-c1">=</span> <span class="pl-v">DiffusionPipeline</span>.<span class="pl-en">from_pretrained</span>(<span class="pl-s">"stabilityai/stable-diffusion-x4-upscaler"</span>, <span class="pl-c1">**</span><span class="pl-s1">safety_modules</span>, <span class="pl-s1">torch_dtype</span><span class="pl-c1">=</span><span class="pl-s1">torch</span>.<span class="pl-s1">float16</span>)
<span class="pl-s1">stage_3</span>.<span class="pl-en">enable_xformers_memory_efficient_attention</span>()  <span class="pl-c"># remove line if torch.__version__ &gt;= 2.0.0</span>
<span class="pl-s1">stage_3</span>.<span class="pl-en">enable_model_cpu_offload</span>()

<span class="pl-s1">prompt</span> <span class="pl-c1">=</span> <span class="pl-s">'a photo of a kangaroo wearing an orange hoodie and blue sunglasses standing in front of the eiffel tower holding a sign that says "very deep learning"'</span>

<span class="pl-c"># text embeds</span>
<span class="pl-s1">prompt_embeds</span>, <span class="pl-s1">negative_embeds</span> <span class="pl-c1">=</span> <span class="pl-s1">stage_1</span>.<span class="pl-en">encode_prompt</span>(<span class="pl-s1">prompt</span>)

<span class="pl-s1">generator</span> <span class="pl-c1">=</span> <span class="pl-s1">torch</span>.<span class="pl-en">manual_seed</span>(<span class="pl-c1">0</span>)

<span class="pl-c"># stage 1</span>
<span class="pl-s1">image</span> <span class="pl-c1">=</span> <span class="pl-en">stage_1</span>(<span class="pl-s1">prompt_embeds</span><span class="pl-c1">=</span><span class="pl-s1">prompt_embeds</span>, <span class="pl-s1">negative_prompt_embeds</span><span class="pl-c1">=</span><span class="pl-s1">negative_embeds</span>, <span class="pl-s1">generator</span><span class="pl-c1">=</span><span class="pl-s1">generator</span>, <span class="pl-s1">output_type</span><span class="pl-c1">=</span><span class="pl-s">"pt"</span>).<span class="pl-s1">images</span>
<span class="pl-en">pt_to_pil</span>(<span class="pl-s1">image</span>)[<span class="pl-c1">0</span>].<span class="pl-en">save</span>(<span class="pl-s">"./if_stage_I.png"</span>)

<span class="pl-c"># stage 2</span>
<span class="pl-s1">image</span> <span class="pl-c1">=</span> <span class="pl-en">stage_2</span>(
    <span class="pl-s1">image</span><span class="pl-c1">=</span><span class="pl-s1">image</span>, <span class="pl-s1">prompt_embeds</span><span class="pl-c1">=</span><span class="pl-s1">prompt_embeds</span>, <span class="pl-s1">negative_prompt_embeds</span><span class="pl-c1">=</span><span class="pl-s1">negative_embeds</span>, <span class="pl-s1">generator</span><span class="pl-c1">=</span><span class="pl-s1">generator</span>, <span class="pl-s1">output_type</span><span class="pl-c1">=</span><span class="pl-s">"pt"</span>
).<span class="pl-s1">images</span>
<span class="pl-en">pt_to_pil</span>(<span class="pl-s1">image</span>)[<span class="pl-c1">0</span>].<span class="pl-en">save</span>(<span class="pl-s">"./if_stage_II.png"</span>)

<span class="pl-c"># stage 3</span>
<span class="pl-s1">image</span> <span class="pl-c1">=</span> <span class="pl-en">stage_3</span>(<span class="pl-s1">prompt</span><span class="pl-c1">=</span><span class="pl-s1">prompt</span>, <span class="pl-s1">image</span><span class="pl-c1">=</span><span class="pl-s1">image</span>, <span class="pl-s1">generator</span><span class="pl-c1">=</span><span class="pl-s1">generator</span>, <span class="pl-s1">noise_level</span><span class="pl-c1">=</span><span class="pl-c1">100</span>).<span class="pl-s1">images</span>
<span class="pl-s1">image</span>[<span class="pl-c1">0</span>].<span class="pl-en">save</span>(<span class="pl-s">"./if_stage_III.png"</span>)</pre><div class="zeroclipboard-container">
    <clipboard-copy aria-label="Copy" class="ClipboardButton btn btn-invisible js-clipboard-copy m-2 p-0 tooltipped-no-delay d-flex flex-justify-center flex-items-center" data-copy-feedback="Copied!" data-tooltip-direction="w" value="from diffusers import DiffusionPipeline
from diffusers.utils import pt_to_pil
import torch

# stage 1
stage_1 = DiffusionPipeline.from_pretrained(&quot;DeepFloyd/IF-I-XL-v1.0&quot;, variant=&quot;fp16&quot;, torch_dtype=torch.float16)
stage_1.enable_xformers_memory_efficient_attention()  # remove line if torch.__version__ >= 2.0.0
stage_1.enable_model_cpu_offload()

# stage 2
stage_2 = DiffusionPipeline.from_pretrained(
    &quot;DeepFloyd/IF-II-L-v1.0&quot;, text_encoder=None, variant=&quot;fp16&quot;, torch_dtype=torch.float16
)
stage_2.enable_xformers_memory_efficient_attention()  # remove line if torch.__version__ >= 2.0.0
stage_2.enable_model_cpu_offload()

# stage 3
safety_modules = {&quot;feature_extractor&quot;: stage_1.feature_extractor, &quot;safety_checker&quot;: stage_1.safety_checker, &quot;watermarker&quot;: stage_1.watermarker}
stage_3 = DiffusionPipeline.from_pretrained(&quot;stabilityai/stable-diffusion-x4-upscaler&quot;, **safety_modules, torch_dtype=torch.float16)
stage_3.enable_xformers_memory_efficient_attention()  # remove line if torch.__version__ >= 2.0.0
stage_3.enable_model_cpu_offload()

prompt = 'a photo of a kangaroo wearing an orange hoodie and blue sunglasses standing in front of the eiffel tower holding a sign that says &quot;very deep learning&quot;'

# text embeds
prompt_embeds, negative_embeds = stage_1.encode_prompt(prompt)

generator = torch.manual_seed(0)

# stage 1
image = stage_1(prompt_embeds=prompt_embeds, negative_prompt_embeds=negative_embeds, generator=generator, output_type=&quot;pt&quot;).images
pt_to_pil(image)[0].save(&quot;./if_stage_I.png&quot;)

# stage 2
image = stage_2(
    image=image, prompt_embeds=prompt_embeds, negative_prompt_embeds=negative_embeds, generator=generator, output_type=&quot;pt&quot;
).images
pt_to_pil(image)[0].save(&quot;./if_stage_II.png&quot;)

# stage 3
image = stage_3(prompt=prompt, image=image, generator=generator, noise_level=100).images
image[0].save(&quot;./if_stage_III.png&quot;)" tabindex="0" role="button">
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon">
    <path d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z"></path><path d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z"></path>
</svg>
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none">
    <path d="M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z"></path>
</svg>
    </clipboard-copy>
  </div></div>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有多种方法可以加快推理时间并进一步降低内存消耗</font></font><code>diffusers</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。为此，请查看 Diffusers 文档：</font></font></p>
<ul dir="auto">
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">🚀</font></font><a href="https://huggingface.co/docs/diffusers/api/pipelines/if#optimizing-for-speed" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">优化推理时间</font></font></a></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">⚙️</font></font><a href="https://huggingface.co/docs/diffusers/api/pipelines/if#optimizing-for-memory" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">推理期间优化低内存</font></font></a></li>
</ul>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有关如何使用 IF 的更多详细信息，请查看</font></font><a href="https://huggingface.co/blog/if" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IF 博客文章</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><a href="https://huggingface.co/docs/diffusers/main/en/api/pipelines/if" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文档</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">📖。</font></font></p>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Diffusers dreambooth 脚本还支持微调 🎨 </font></font><a href="https://huggingface.co/docs/diffusers/main/en/training/dreambooth#if" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IF</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。通过参数高效微调，您可以使用单个 GPU 和 ~28 GB VRAM 向 IF 添加新概念。</font></font></p>
<div class="markdown-heading" dir="auto"><h2 tabindex="-1" class="heading-element" dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在本地运行代码</font></font></h2><a id="user-content-run-the-code-locally" class="anchor" aria-label="永久链接：在本地运行代码" href="#run-the-code-locally"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div class="markdown-heading" dir="auto"><h3 tabindex="-1" class="heading-element" dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将模型加载到 VRAM 中</font></font></h3><a id="user-content-loading-the-models-into-vram" class="anchor" aria-label="永久链接：将模型加载到 VRAM 中" href="#loading-the-models-into-vram"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto"><pre><span class="pl-k">from</span> <span class="pl-s1">deepfloyd_if</span>.<span class="pl-s1">modules</span> <span class="pl-k">import</span> <span class="pl-v">IFStageI</span>, <span class="pl-v">IFStageII</span>, <span class="pl-v">StableStageIII</span>
<span class="pl-k">from</span> <span class="pl-s1">deepfloyd_if</span>.<span class="pl-s1">modules</span>.<span class="pl-s1">t5</span> <span class="pl-k">import</span> <span class="pl-v">T5Embedder</span>

<span class="pl-s1">device</span> <span class="pl-c1">=</span> <span class="pl-s">'cuda:0'</span>
<span class="pl-s1">if_I</span> <span class="pl-c1">=</span> <span class="pl-v">IFStageI</span>(<span class="pl-s">'IF-I-XL-v1.0'</span>, <span class="pl-s1">device</span><span class="pl-c1">=</span><span class="pl-s1">device</span>)
<span class="pl-s1">if_II</span> <span class="pl-c1">=</span> <span class="pl-v">IFStageII</span>(<span class="pl-s">'IF-II-L-v1.0'</span>, <span class="pl-s1">device</span><span class="pl-c1">=</span><span class="pl-s1">device</span>)
<span class="pl-s1">if_III</span> <span class="pl-c1">=</span> <span class="pl-v">StableStageIII</span>(<span class="pl-s">'stable-diffusion-x4-upscaler'</span>, <span class="pl-s1">device</span><span class="pl-c1">=</span><span class="pl-s1">device</span>)
<span class="pl-s1">t5</span> <span class="pl-c1">=</span> <span class="pl-v">T5Embedder</span>(<span class="pl-s1">device</span><span class="pl-c1">=</span><span class="pl-s">"cpu"</span>)</pre><div class="zeroclipboard-container">
    <clipboard-copy aria-label="Copy" class="ClipboardButton btn btn-invisible js-clipboard-copy m-2 p-0 tooltipped-no-delay d-flex flex-justify-center flex-items-center" data-copy-feedback="Copied!" data-tooltip-direction="w" value="from deepfloyd_if.modules import IFStageI, IFStageII, StableStageIII
from deepfloyd_if.modules.t5 import T5Embedder

device = 'cuda:0'
if_I = IFStageI('IF-I-XL-v1.0', device=device)
if_II = IFStageII('IF-II-L-v1.0', device=device)
if_III = StableStageIII('stable-diffusion-x4-upscaler', device=device)
t5 = T5Embedder(device=&quot;cpu&quot;)" tabindex="0" role="button">
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon">
    <path d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z"></path><path d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z"></path>
</svg>
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none">
    <path d="M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z"></path>
</svg>
    </clipboard-copy>
  </div></div>
<div class="markdown-heading" dir="auto"><h3 tabindex="-1" class="heading-element" dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我梦想</font></font></h3><a id="user-content-i-dream" class="anchor" aria-label="永久链接：我。梦想" href="#i-dream"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dream 是 IF 模型的文本转图像模式</font></font></p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto"><pre><span class="pl-k">from</span> <span class="pl-s1">deepfloyd_if</span>.<span class="pl-s1">pipelines</span> <span class="pl-k">import</span> <span class="pl-s1">dream</span>

<span class="pl-s1">prompt</span> <span class="pl-c1">=</span> <span class="pl-s">'ultra close-up color photo portrait of rainbow owl with deer horns in the woods'</span>
<span class="pl-s1">count</span> <span class="pl-c1">=</span> <span class="pl-c1">4</span>

<span class="pl-s1">result</span> <span class="pl-c1">=</span> <span class="pl-en">dream</span>(
    <span class="pl-s1">t5</span><span class="pl-c1">=</span><span class="pl-s1">t5</span>, <span class="pl-s1">if_I</span><span class="pl-c1">=</span><span class="pl-s1">if_I</span>, <span class="pl-s1">if_II</span><span class="pl-c1">=</span><span class="pl-s1">if_II</span>, <span class="pl-s1">if_III</span><span class="pl-c1">=</span><span class="pl-s1">if_III</span>,
    <span class="pl-s1">prompt</span><span class="pl-c1">=</span>[<span class="pl-s1">prompt</span>]<span class="pl-c1">*</span><span class="pl-s1">count</span>,
    <span class="pl-s1">seed</span><span class="pl-c1">=</span><span class="pl-c1">42</span>,
    <span class="pl-s1">if_I_kwargs</span><span class="pl-c1">=</span>{
        <span class="pl-s">"guidance_scale"</span>: <span class="pl-c1">7.0</span>,
        <span class="pl-s">"sample_timestep_respacing"</span>: <span class="pl-s">"smart100"</span>,
    },
    <span class="pl-s1">if_II_kwargs</span><span class="pl-c1">=</span>{
        <span class="pl-s">"guidance_scale"</span>: <span class="pl-c1">4.0</span>,
        <span class="pl-s">"sample_timestep_respacing"</span>: <span class="pl-s">"smart50"</span>,
    },
    <span class="pl-s1">if_III_kwargs</span><span class="pl-c1">=</span>{
        <span class="pl-s">"guidance_scale"</span>: <span class="pl-c1">9.0</span>,
        <span class="pl-s">"noise_level"</span>: <span class="pl-c1">20</span>,
        <span class="pl-s">"sample_timestep_respacing"</span>: <span class="pl-s">"75"</span>,
    },
)

<span class="pl-s1">if_III</span>.<span class="pl-en">show</span>(<span class="pl-s1">result</span>[<span class="pl-s">'III'</span>], <span class="pl-s1">size</span><span class="pl-c1">=</span><span class="pl-c1">14</span>)</pre><div class="zeroclipboard-container">
    <clipboard-copy aria-label="Copy" class="ClipboardButton btn btn-invisible js-clipboard-copy m-2 p-0 tooltipped-no-delay d-flex flex-justify-center flex-items-center" data-copy-feedback="Copied!" data-tooltip-direction="w" value="from deepfloyd_if.pipelines import dream

prompt = 'ultra close-up color photo portrait of rainbow owl with deer horns in the woods'
count = 4

result = dream(
    t5=t5, if_I=if_I, if_II=if_II, if_III=if_III,
    prompt=[prompt]*count,
    seed=42,
    if_I_kwargs={
        &quot;guidance_scale&quot;: 7.0,
        &quot;sample_timestep_respacing&quot;: &quot;smart100&quot;,
    },
    if_II_kwargs={
        &quot;guidance_scale&quot;: 4.0,
        &quot;sample_timestep_respacing&quot;: &quot;smart50&quot;,
    },
    if_III_kwargs={
        &quot;guidance_scale&quot;: 9.0,
        &quot;noise_level&quot;: 20,
        &quot;sample_timestep_respacing&quot;: &quot;75&quot;,
    },
)

if_III.show(result['III'], size=14)" tabindex="0" role="button">
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon">
    <path d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z"></path><path d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z"></path>
</svg>
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none">
    <path d="M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z"></path>
</svg>
    </clipboard-copy>
  </div></div>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="/deep-floyd/IF/blob/develop/pics/dream-III.jpg"><img src="/deep-floyd/IF/raw/develop/pics/dream-III.jpg" alt="" style="max-width: 100%;"></a></p>
<div class="markdown-heading" dir="auto"><h2 tabindex="-1" class="heading-element" dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">II. 零样本图像到图像翻译</font></font></h2><a id="user-content-ii-zero-shot-image-to-image-translation" class="anchor" aria-label="永久链接：II. 零样本图像到图像翻译" href="#ii-zero-shot-image-to-image-translation"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="/deep-floyd/IF/blob/develop/pics/img_to_img_scheme.jpeg"><img src="/deep-floyd/IF/raw/develop/pics/img_to_img_scheme.jpeg" alt="" style="max-width: 100%;"></a></p>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在风格转换模式下，你的提示输出的风格与</font></font><code>support_pil_img</code></p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto"><pre><span class="pl-k">from</span> <span class="pl-s1">deepfloyd_if</span>.<span class="pl-s1">pipelines</span> <span class="pl-k">import</span> <span class="pl-s1">style_transfer</span>

<span class="pl-s1">result</span> <span class="pl-c1">=</span> <span class="pl-en">style_transfer</span>(
    <span class="pl-s1">t5</span><span class="pl-c1">=</span><span class="pl-s1">t5</span>, <span class="pl-s1">if_I</span><span class="pl-c1">=</span><span class="pl-s1">if_I</span>, <span class="pl-s1">if_II</span><span class="pl-c1">=</span><span class="pl-s1">if_II</span>,
    <span class="pl-s1">support_pil_img</span><span class="pl-c1">=</span><span class="pl-s1">raw_pil_image</span>,
    <span class="pl-s1">style_prompt</span><span class="pl-c1">=</span>[
        <span class="pl-s">'in style of professional origami'</span>,
        <span class="pl-s">'in style of oil art, Tate modern'</span>,
        <span class="pl-s">'in style of plastic building bricks'</span>,
        <span class="pl-s">'in style of classic anime from 1990'</span>,
    ],
    <span class="pl-s1">seed</span><span class="pl-c1">=</span><span class="pl-c1">42</span>,
    <span class="pl-s1">if_I_kwargs</span><span class="pl-c1">=</span>{
        <span class="pl-s">"guidance_scale"</span>: <span class="pl-c1">10.0</span>,
        <span class="pl-s">"sample_timestep_respacing"</span>: <span class="pl-s">"10,10,10,10,10,10,10,10,0,0"</span>,
        <span class="pl-s">'support_noise_less_qsample_steps'</span>: <span class="pl-c1">5</span>,
    },
    <span class="pl-s1">if_II_kwargs</span><span class="pl-c1">=</span>{
        <span class="pl-s">"guidance_scale"</span>: <span class="pl-c1">4.0</span>,
        <span class="pl-s">"sample_timestep_respacing"</span>: <span class="pl-s">'smart50'</span>,
        <span class="pl-s">"support_noise_less_qsample_steps"</span>: <span class="pl-c1">5</span>,
    },
)
<span class="pl-s1">if_I</span>.<span class="pl-en">show</span>(<span class="pl-s1">result</span>[<span class="pl-s">'II'</span>], <span class="pl-c1">1</span>, <span class="pl-c1">20</span>)</pre><div class="zeroclipboard-container">
    <clipboard-copy aria-label="Copy" class="ClipboardButton btn btn-invisible js-clipboard-copy m-2 p-0 tooltipped-no-delay d-flex flex-justify-center flex-items-center" data-copy-feedback="Copied!" data-tooltip-direction="w" value="from deepfloyd_if.pipelines import style_transfer

result = style_transfer(
    t5=t5, if_I=if_I, if_II=if_II,
    support_pil_img=raw_pil_image,
    style_prompt=[
        'in style of professional origami',
        'in style of oil art, Tate modern',
        'in style of plastic building bricks',
        'in style of classic anime from 1990',
    ],
    seed=42,
    if_I_kwargs={
        &quot;guidance_scale&quot;: 10.0,
        &quot;sample_timestep_respacing&quot;: &quot;10,10,10,10,10,10,10,10,0,0&quot;,
        'support_noise_less_qsample_steps': 5,
    },
    if_II_kwargs={
        &quot;guidance_scale&quot;: 4.0,
        &quot;sample_timestep_respacing&quot;: 'smart50',
        &quot;support_noise_less_qsample_steps&quot;: 5,
    },
)
if_I.show(result['II'], 1, 20)" tabindex="0" role="button">
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon">
    <path d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z"></path><path d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z"></path>
</svg>
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none">
    <path d="M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z"></path>
</svg>
    </clipboard-copy>
  </div></div>
<p dir="auto"><animated-image data-catalyst=""><a target="_blank" rel="noopener noreferrer" href="/deep-floyd/IF/blob/develop/pics/deep_floyd_if_image_2_image.gif" data-target="animated-image.originalLink"><img src="/deep-floyd/IF/raw/develop/pics/deep_floyd_if_image_2_image.gif" alt="替代文本" style="max-width: 100%; display: inline-block;" data-target="animated-image.originalImage"></a>
      <span class="AnimatedImagePlayer" data-target="animated-image.player" hidden="">
        <a data-target="animated-image.replacedLink" class="AnimatedImagePlayer-images" href="https://github.com/deep-floyd/IF/blob/develop/pics/deep_floyd_if_image_2_image.gif" target="_blank">
          
        <span data-target="animated-image.imageContainer">
            <img data-target="animated-image.replacedImage" alt="替代文本" class="AnimatedImagePlayer-animatedImage" src="https://github.com/deep-floyd/IF/raw/develop/pics/deep_floyd_if_image_2_image.gif" style="display: block; opacity: 1;">
          <canvas class="AnimatedImagePlayer-stillImage" aria-hidden="true" width="814" height="501"></canvas></span></a>
        <button data-target="animated-image.imageButton" class="AnimatedImagePlayer-images" tabindex="-1" aria-label="播放替代文本" hidden=""></button>
        <span class="AnimatedImagePlayer-controls" data-target="animated-image.controls" hidden="">
          <button data-target="animated-image.playButton" class="AnimatedImagePlayer-button" aria-label="播放替代文本">
            <svg aria-hidden="true" focusable="false" class="octicon icon-play" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M4 13.5427V2.45734C4 1.82607 4.69692 1.4435 5.2295 1.78241L13.9394 7.32507C14.4334 7.63943 14.4334 8.36057 13.9394 8.67493L5.2295 14.2176C4.69692 14.5565 4 14.1739 4 13.5427Z">
            </path></svg>
            <svg aria-hidden="true" focusable="false" class="octicon icon-pause" width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">
              <rect x="4" y="2" width="3" height="12" rx="1"></rect>
              <rect x="9" y="2" width="3" height="12" rx="1"></rect>
            </svg>
          </button>
          <a data-target="animated-image.openButton" aria-label="在新窗口中打开替代文本" class="AnimatedImagePlayer-button" href="https://github.com/deep-floyd/IF/blob/develop/pics/deep_floyd_if_image_2_image.gif" target="_blank">
            <svg aria-hidden="true" class="octicon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16">
              <path fill-rule="evenodd" d="M10.604 1h4.146a.25.25 0 01.25.25v4.146a.25.25 0 01-.427.177L13.03 4.03 9.28 7.78a.75.75 0 01-1.06-1.06l3.75-3.75-1.543-1.543A.25.25 0 0110.604 1zM3.75 2A1.75 1.75 0 002 3.75v8.5c0 .966.784 1.75 1.75 1.75h8.5A1.75 1.75 0 0014 12.25v-3.5a.75.75 0 00-1.5 0v3.5a.25.25 0 01-.25.25h-8.5a.25.25 0 01-.25-.25v-8.5a.25.25 0 01.25-.25h3.5a.75.75 0 000-1.5h-3.5z"></path>
            </svg>
          </a>
        </span>
      </span></animated-image></p>
<div class="markdown-heading" dir="auto"><h2 tabindex="-1" class="heading-element" dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">三、超分辨率</font></font></h2><a id="user-content-iii-super-resolution" class="anchor" aria-label="永久链接：III. 超级分辨率" href="#iii-super-resolution"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对于超分辨率，用户可以</font><font style="vertical-align: inherit;">在不一定由 IF 生成的图像上运行</font></font><code>IF-II</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和/或“稳定 x4”（两个级联）：</font></font><code>IF-III</code><font style="vertical-align: inherit;"></font></p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto"><pre><span class="pl-k">from</span> <span class="pl-s1">deepfloyd_if</span>.<span class="pl-s1">pipelines</span> <span class="pl-k">import</span> <span class="pl-s1">super_resolution</span>

<span class="pl-s1">middle_res</span> <span class="pl-c1">=</span> <span class="pl-en">super_resolution</span>(
    <span class="pl-s1">t5</span>,
    <span class="pl-s1">if_III</span><span class="pl-c1">=</span><span class="pl-s1">if_II</span>,
    <span class="pl-s1">prompt</span><span class="pl-c1">=</span>[<span class="pl-s">'woman with a blue headscarf and a blue sweaterp, detailed picture, 4k dslr, best quality'</span>],
    <span class="pl-s1">support_pil_img</span><span class="pl-c1">=</span><span class="pl-s1">raw_pil_image</span>,
    <span class="pl-s1">img_scale</span><span class="pl-c1">=</span><span class="pl-c1">4.</span>,
    <span class="pl-s1">img_size</span><span class="pl-c1">=</span><span class="pl-c1">64</span>,
    <span class="pl-s1">if_III_kwargs</span><span class="pl-c1">=</span>{
        <span class="pl-s">'sample_timestep_respacing'</span>: <span class="pl-s">'smart100'</span>,
        <span class="pl-s">'aug_level'</span>: <span class="pl-c1">0.5</span>,
        <span class="pl-s">'guidance_scale'</span>: <span class="pl-c1">6.0</span>,
    },
)
<span class="pl-s1">high_res</span> <span class="pl-c1">=</span> <span class="pl-en">super_resolution</span>(
    <span class="pl-s1">t5</span>,
    <span class="pl-s1">if_III</span><span class="pl-c1">=</span><span class="pl-s1">if_III</span>,
    <span class="pl-s1">prompt</span><span class="pl-c1">=</span>[<span class="pl-s">''</span>],
    <span class="pl-s1">support_pil_img</span><span class="pl-c1">=</span><span class="pl-s1">middle_res</span>[<span class="pl-s">'III'</span>][<span class="pl-c1">0</span>],
    <span class="pl-s1">img_scale</span><span class="pl-c1">=</span><span class="pl-c1">4.</span>,
    <span class="pl-s1">img_size</span><span class="pl-c1">=</span><span class="pl-c1">256</span>,
    <span class="pl-s1">if_III_kwargs</span><span class="pl-c1">=</span>{
        <span class="pl-s">"guidance_scale"</span>: <span class="pl-c1">9.0</span>,
        <span class="pl-s">"noise_level"</span>: <span class="pl-c1">20</span>,
        <span class="pl-s">"sample_timestep_respacing"</span>: <span class="pl-s">"75"</span>,
    },
)
<span class="pl-en">show_superres</span>(<span class="pl-s1">raw_pil_image</span>, <span class="pl-s1">high_res</span>[<span class="pl-s">'III'</span>][<span class="pl-c1">0</span>])</pre><div class="zeroclipboard-container">
    <clipboard-copy aria-label="Copy" class="ClipboardButton btn btn-invisible js-clipboard-copy m-2 p-0 tooltipped-no-delay d-flex flex-justify-center flex-items-center" data-copy-feedback="Copied!" data-tooltip-direction="w" value="from deepfloyd_if.pipelines import super_resolution

middle_res = super_resolution(
    t5,
    if_III=if_II,
    prompt=['woman with a blue headscarf and a blue sweaterp, detailed picture, 4k dslr, best quality'],
    support_pil_img=raw_pil_image,
    img_scale=4.,
    img_size=64,
    if_III_kwargs={
        'sample_timestep_respacing': 'smart100',
        'aug_level': 0.5,
        'guidance_scale': 6.0,
    },
)
high_res = super_resolution(
    t5,
    if_III=if_III,
    prompt=[''],
    support_pil_img=middle_res['III'][0],
    img_scale=4.,
    img_size=256,
    if_III_kwargs={
        &quot;guidance_scale&quot;: 9.0,
        &quot;noise_level&quot;: 20,
        &quot;sample_timestep_respacing&quot;: &quot;75&quot;,
    },
)
show_superres(raw_pil_image, high_res['III'][0])" tabindex="0" role="button">
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon">
    <path d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z"></path><path d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z"></path>
</svg>
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none">
    <path d="M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z"></path>
</svg>
    </clipboard-copy>
  </div></div>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="/deep-floyd/IF/blob/develop/pics/if_as_upscaler.jpg"><img src="/deep-floyd/IF/raw/develop/pics/if_as_upscaler.jpg" alt="" style="max-width: 100%;"></a></p>
<div class="markdown-heading" dir="auto"><h3 tabindex="-1" class="heading-element" dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IV. 零样本修复</font></font></h3><a id="user-content-iv-zero-shot-inpainting" class="anchor" aria-label="永久链接：IV. 零样本修复" href="#iv-zero-shot-inpainting"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto"><pre><span class="pl-k">from</span> <span class="pl-s1">deepfloyd_if</span>.<span class="pl-s1">pipelines</span> <span class="pl-k">import</span> <span class="pl-s1">inpainting</span>

<span class="pl-s1">result</span> <span class="pl-c1">=</span> <span class="pl-en">inpainting</span>(
    <span class="pl-s1">t5</span><span class="pl-c1">=</span><span class="pl-s1">t5</span>, <span class="pl-s1">if_I</span><span class="pl-c1">=</span><span class="pl-s1">if_I</span>,
    <span class="pl-s1">if_II</span><span class="pl-c1">=</span><span class="pl-s1">if_II</span>,
    <span class="pl-s1">if_III</span><span class="pl-c1">=</span><span class="pl-s1">if_III</span>,
    <span class="pl-s1">support_pil_img</span><span class="pl-c1">=</span><span class="pl-s1">raw_pil_image</span>,
    <span class="pl-s1">inpainting_mask</span><span class="pl-c1">=</span><span class="pl-s1">inpainting_mask</span>,
    <span class="pl-s1">prompt</span><span class="pl-c1">=</span>[
        <span class="pl-s">'oil art, a man in a hat'</span>,
    ],
    <span class="pl-s1">seed</span><span class="pl-c1">=</span><span class="pl-c1">42</span>,
    <span class="pl-s1">if_I_kwargs</span><span class="pl-c1">=</span>{
        <span class="pl-s">"guidance_scale"</span>: <span class="pl-c1">7.0</span>,
        <span class="pl-s">"sample_timestep_respacing"</span>: <span class="pl-s">"10,10,10,10,10,0,0,0,0,0"</span>,
        <span class="pl-s">'support_noise_less_qsample_steps'</span>: <span class="pl-c1">0</span>,
    },
    <span class="pl-s1">if_II_kwargs</span><span class="pl-c1">=</span>{
        <span class="pl-s">"guidance_scale"</span>: <span class="pl-c1">4.0</span>,
        <span class="pl-s">'aug_level'</span>: <span class="pl-c1">0.0</span>,
        <span class="pl-s">"sample_timestep_respacing"</span>: <span class="pl-s">'100'</span>,
    },
    <span class="pl-s1">if_III_kwargs</span><span class="pl-c1">=</span>{
        <span class="pl-s">"guidance_scale"</span>: <span class="pl-c1">9.0</span>,
        <span class="pl-s">"noise_level"</span>: <span class="pl-c1">20</span>,
        <span class="pl-s">"sample_timestep_respacing"</span>: <span class="pl-s">"75"</span>,
    },
)
<span class="pl-s1">if_I</span>.<span class="pl-en">show</span>(<span class="pl-s1">result</span>[<span class="pl-s">'I'</span>], <span class="pl-c1">2</span>, <span class="pl-c1">3</span>)
<span class="pl-s1">if_I</span>.<span class="pl-en">show</span>(<span class="pl-s1">result</span>[<span class="pl-s">'II'</span>], <span class="pl-c1">2</span>, <span class="pl-c1">6</span>)
<span class="pl-s1">if_I</span>.<span class="pl-en">show</span>(<span class="pl-s1">result</span>[<span class="pl-s">'III'</span>], <span class="pl-c1">2</span>, <span class="pl-c1">14</span>)</pre><div class="zeroclipboard-container">
    <clipboard-copy aria-label="Copy" class="ClipboardButton btn btn-invisible js-clipboard-copy m-2 p-0 tooltipped-no-delay d-flex flex-justify-center flex-items-center" data-copy-feedback="Copied!" data-tooltip-direction="w" value="from deepfloyd_if.pipelines import inpainting

result = inpainting(
    t5=t5, if_I=if_I,
    if_II=if_II,
    if_III=if_III,
    support_pil_img=raw_pil_image,
    inpainting_mask=inpainting_mask,
    prompt=[
        'oil art, a man in a hat',
    ],
    seed=42,
    if_I_kwargs={
        &quot;guidance_scale&quot;: 7.0,
        &quot;sample_timestep_respacing&quot;: &quot;10,10,10,10,10,0,0,0,0,0&quot;,
        'support_noise_less_qsample_steps': 0,
    },
    if_II_kwargs={
        &quot;guidance_scale&quot;: 4.0,
        'aug_level': 0.0,
        &quot;sample_timestep_respacing&quot;: '100',
    },
    if_III_kwargs={
        &quot;guidance_scale&quot;: 9.0,
        &quot;noise_level&quot;: 20,
        &quot;sample_timestep_respacing&quot;: &quot;75&quot;,
    },
)
if_I.show(result['I'], 2, 3)
if_I.show(result['II'], 2, 6)
if_I.show(result['III'], 2, 14)" tabindex="0" role="button">
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon">
    <path d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z"></path><path d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z"></path>
</svg>
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none">
    <path d="M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z"></path>
</svg>
    </clipboard-copy>
  </div></div>
<p dir="auto"><animated-image data-catalyst=""><a target="_blank" rel="noopener noreferrer" href="/deep-floyd/IF/blob/develop/pics/deep_floyd_if_inpainting.gif" data-target="animated-image.originalLink"><img src="/deep-floyd/IF/raw/develop/pics/deep_floyd_if_inpainting.gif" alt="" style="max-width: 100%; display: inline-block;" data-target="animated-image.originalImage"></a>
      <span class="AnimatedImagePlayer" data-target="animated-image.player" hidden="">
        <a data-target="animated-image.replacedLink" class="AnimatedImagePlayer-images" href="https://github.com/deep-floyd/IF/blob/develop/pics/deep_floyd_if_inpainting.gif" target="_blank">
          
        <span data-target="animated-image.imageContainer">
            <img data-target="animated-image.replacedImage" alt="deep_floyd_if_inpainting.gif" class="AnimatedImagePlayer-animatedImage" src="https://github.com/deep-floyd/IF/raw/develop/pics/deep_floyd_if_inpainting.gif" style="display: block; opacity: 1;">
          <canvas class="AnimatedImagePlayer-stillImage" aria-hidden="true" width="814" height="814"></canvas></span></a>
        <button data-target="animated-image.imageButton" class="AnimatedImagePlayer-images" tabindex="-1" aria-label="播放 deep_floyd_if_inpainting.gif" hidden=""></button>
        <span class="AnimatedImagePlayer-controls" data-target="animated-image.controls" hidden="">
          <button data-target="animated-image.playButton" class="AnimatedImagePlayer-button" aria-label="播放 deep_floyd_if_inpainting.gif">
            <svg aria-hidden="true" focusable="false" class="octicon icon-play" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M4 13.5427V2.45734C4 1.82607 4.69692 1.4435 5.2295 1.78241L13.9394 7.32507C14.4334 7.63943 14.4334 8.36057 13.9394 8.67493L5.2295 14.2176C4.69692 14.5565 4 14.1739 4 13.5427Z">
            </path></svg>
            <svg aria-hidden="true" focusable="false" class="octicon icon-pause" width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">
              <rect x="4" y="2" width="3" height="12" rx="1"></rect>
              <rect x="9" y="2" width="3" height="12" rx="1"></rect>
            </svg>
          </button>
          <a data-target="animated-image.openButton" aria-label="在新窗口中打开 deep_floyd_if_inpainting.gif" class="AnimatedImagePlayer-button" href="https://github.com/deep-floyd/IF/blob/develop/pics/deep_floyd_if_inpainting.gif" target="_blank">
            <svg aria-hidden="true" class="octicon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16">
              <path fill-rule="evenodd" d="M10.604 1h4.146a.25.25 0 01.25.25v4.146a.25.25 0 01-.427.177L13.03 4.03 9.28 7.78a.75.75 0 01-1.06-1.06l3.75-3.75-1.543-1.543A.25.25 0 0110.604 1zM3.75 2A1.75 1.75 0 002 3.75v8.5c0 .966.784 1.75 1.75 1.75h8.5A1.75 1.75 0 0014 12.25v-3.5a.75.75 0 00-1.5 0v3.5a.25.25 0 01-.25.25h-8.5a.25.25 0 01-.25-.25v-8.5a.25.25 0 01.25-.25h3.5a.75.75 0 000-1.5h-3.5z"></path>
            </svg>
          </a>
        </span>
      </span></animated-image></p>
<div class="markdown-heading" dir="auto"><h3 tabindex="-1" class="heading-element" dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">🤗 模范动物园 🤗</font></font></h3><a id="user-content--model-zoo-" class="anchor" aria-label="永久链接：🤗 模型动物园 🤗" href="#-model-zoo-"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">下载权重以及模型卡的链接将很快在模型动物园的每个模型上提供</font></font></p>
<div class="markdown-heading" dir="auto"><h4 tabindex="-1" class="heading-element" dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">原来的</font></font></h4><a id="user-content-original" class="anchor" aria-label="永久链接：原始" href="#original"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<table>
<thead>
<tr>
<th align="left"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">姓名</font></font></th>
<th align="center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">级联</font></font></th>
<th align="center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参数</font></font></th>
<th align="center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">火焰离子化</font></font></th>
<th align="center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">批次大小</font></font></th>
<th align="center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">脚步</font></font></th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><a href="https://huggingface.co/DeepFloyd/IF-I-M-v1.0" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果我是</font></font></a></td>
<td align="center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我</font></font></td>
<td align="center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4亿</font></font></td>
<td align="center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8.86</font></font></td>
<td align="center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3072</font></font></td>
<td align="center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.5米</font></font></td>
</tr>
<tr>
<td align="left"><a href="https://huggingface.co/DeepFloyd/IF-I-L-v1.0" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">中频</font></font></a></td>
<td align="center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我</font></font></td>
<td align="center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">900米</font></font></td>
<td align="center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8.06</font></font></td>
<td align="center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3200</font></font></td>
<td align="center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.0米</font></font></td>
</tr>
<tr>
<td align="left"><a href="https://huggingface.co/DeepFloyd/IF-I-XL-v1.0" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果-我-XL</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> *</font></font></td>
<td align="center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我</font></font></td>
<td align="center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4.3B</font></font></td>
<td align="center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.66</font></font></td>
<td align="center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3072</font></font></td>
<td align="center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.42万</font></font></td>
</tr>
<tr>
<td align="left"><a href="https://huggingface.co/DeepFloyd/IF-II-M-v1.0" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IF-II-M</font></font></a></td>
<td align="center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">二</font></font></td>
<td align="center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">450米</font></font></td>
<td align="center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-</font></font></td>
<td align="center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1536</font></font></td>
<td align="center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.5米</font></font></td>
</tr>
<tr>
<td align="left"><a href="https://huggingface.co/DeepFloyd/IF-II-L-v1.0" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果-II-L</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> *</font></font></td>
<td align="center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">二</font></font></td>
<td align="center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.2B</font></font></td>
<td align="center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-</font></font></td>
<td align="center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1536</font></font></td>
<td align="center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.5米</font></font></td>
</tr>
<tr>
<td align="left"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IF-III-L* </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（即将推出）</font></font></em></td>
<td align="center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">三</font></font></td>
<td align="center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">700米</font></font></td>
<td align="center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-</font></font></td>
<td align="center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3072</font></font></td>
<td align="center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.25米</font></font></td>
</tr>
</tbody>
</table>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">*最佳模块</font></font></p>
<div class="markdown-heading" dir="auto"><h3 tabindex="-1" class="heading-element" dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">定量评估</font></font></h3><a id="user-content-quantitative-evaluation" class="anchor" aria-label="永久链接：定量评估" href="#quantitative-evaluation"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto"><code>FID = 6.66</code></p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="/deep-floyd/IF/blob/develop/pics/fid30k_if.jpg"><img src="/deep-floyd/IF/raw/develop/pics/fid30k_if.jpg" alt="" style="max-width: 100%;"></a></p>
<div class="markdown-heading" dir="auto"><h2 tabindex="-1" class="heading-element" dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">执照</font></font></h2><a id="user-content-license" class="anchor" aria-label="永久链接：许可证" href="#license"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此存储库中的代码是根据定制许可证发布的（参见添加的</font></font><a href="https://github.com/deep-floyd/IF/blob/main/LICENSE#L13"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第二点</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。</font></font></p>
<p dir="auto"><font style="vertical-align: inherit;"></font><a href="https://huggingface.co/DeepFloyd" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这些重量将很快通过Hugging Face 的 DeepFloyd 组织</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">提供</font><font style="vertical-align: inherit;">，并拥有自己的许可证。</font></font></p>
<p dir="auto"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">免责声明：</font></font></strong> <em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IF 模型的初始版本暂时受到限制性研究目的许可，以收集反馈，之后我们打算发布与其他稳定性 AI 模型一致的完全开源模型。</font></font></em></p>
<div class="markdown-heading" dir="auto"><h2 tabindex="-1" class="heading-element" dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">局限性和偏见</font></font></h2><a id="user-content-limitations-and-biases" class="anchor" aria-label="永久链接：局限性和偏见" href="#limitations-and-biases"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此代码库中提供的模型具有已知的局限性和偏差。请参阅</font></font><a href="https://huggingface.co/DeepFloyd/IF-I-L-v1.0" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">模型卡</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">了解更多信息。</font></font></p>
<div class="markdown-heading" dir="auto"><h2 tabindex="-1" class="heading-element" dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">🎓 DeepFloyd IF 创作者：</font></font></h2><a id="user-content--deepfloyd-if-creators" class="anchor" aria-label="永久链接：🎓 DeepFloyd IF 创作者：" href="#-deepfloyd-if-creators"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<ul dir="auto">
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Alex Shonenkov </font></font><a href="https://github.com/shonenkov"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitHub</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> | </font></font><a href="https://linktr.ee/shonenkovAI" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Linktr</font></font></a></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Misha Konstantinov </font></font><a href="https://github.com/zeroshot-ai"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitHub</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> | </font></font><a href="https://twitter.com/_bra_ket" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Twitter</font></font></a></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Daria Bakshandaeva </font></font><a href="https://github.com/Gugutse"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitHub</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> | </font></font><a href="https://twitter.com/_gugutse_" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Twitter</font></font></a></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Christoph Schuhmann </font></font><a href="https://github.com/christophschuhmann"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitHub</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> |</font></font><a href="https://twitter.com/laion_ai" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">推特</font></font></a></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ksenia Ivanova </font></font><a href="https://github.com/ivksu"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitHub</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> | </font></font><a href="https://twitter.com/susiaiv" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Twitter</font></font></a></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nadiia Klokova </font></font><a href="https://github.com/vauimpuls"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitHub</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> |</font></font><a href="https://twitter.com/vauimpuls" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">推特</font></font></a></li>
</ul>
<div class="markdown-heading" dir="auto"><h2 tabindex="-1" class="heading-element" dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">📄 研究论文（即将发布）</font></font></h2><a id="user-content--research-paper-soon" class="anchor" aria-label="永久链接：📄 研究论文（即将发布）" href="#-research-paper-soon"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div class="markdown-heading" dir="auto"><h2 tabindex="-1" class="heading-element" dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">致谢</font></font></h2><a id="user-content-acknowledgements" class="anchor" aria-label="永久链接：致谢" href="#acknowledgements"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">特别感谢</font></font><a href="http://stability.ai" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">StabilityAI</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">及其首席执行官</font></font><a href="https://twitter.com/emostaque" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Emad Mostaque</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的宝贵支持，提供 GPU 计算和基础设施来训练模型（我们感谢</font></font><a href="https://github.com/rvencu"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Richard Vencu</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）；特别感谢</font></font><a href="https://laion.ai" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LAION</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><a href="https://github.com/christophschuhmann"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Christoph Schuhmann</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对项目的贡献和精心准备的数据集；感谢</font></font><a href="https://huggingface.co" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Huggingface</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">团队在推理过程中优化模型的速度和内存消耗，创建演示并提供很棒的建议！</font></font></p>
<div class="markdown-heading" dir="auto"><h2 tabindex="-1" class="heading-element" dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">🚀 外部贡献者 🚀</font></font></h2><a id="user-content--external-contributors-" class="anchor" aria-label="永久链接：🚀 外部贡献者 🚀" href="#-external-contributors-"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<ul dir="auto">
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最诚挚的感谢</font></font><a href="https://github.com/apolinario"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">@Apolinário</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，感谢他们在各个阶段提供的想法、咨询、帮助和支持，使 IF 可以在开源中使用；感谢他们编写了大量文档和说明；感谢他们在困难时刻营造了友好的氛围🦉；</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">感谢</font></font><a href="https://github.com/patrickvonplaten"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">@patrickvonplaten</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，将 unet 模型的加载时间提高了 80%；将 Stable-Diffusion-x4 集成为原生管道💪；</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">感谢</font></font><a href="https://github.com/williamberman"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">@williamberman</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><a href="https://github.com/patrickvonplaten"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">@patrickvonplaten</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的扩散器集成🙌；</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">感谢</font></font><a href="https://github.com/hysts"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">@hysts</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><a href="https://github.com/apolinario"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">@Apolinário</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 IF 🚀</font><font style="vertical-align: inherit;">创建了</font></font><a href="https://huggingface.co/spaces/DeepFloyd/IF" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最佳 gradio 演示；</font></font></a><font style="vertical-align: inherit;"></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">感谢</font></font><a href="https://github.com/Dango233"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">@Dango233</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 xformers 内存高效注意力机制调整 IF 💪；</font></font></li>
</ul>
</article></div>
